import sys
import os
import site
vstr = "%s.%s"%(sys.version_info[0],sys.version_info[1])
site.addsitedir(os.path.realpath("%s/../lib/python%s"%(sys.path[0],vstr)))
sys.path = [os.path.realpath("%s/../"%sys.path[0])]+sys.path

from django.core.handlers.wsgi import WSGIHandler
from cherrypy                  import wsgiserver

def usage(): 
    print "%s <host> <port>"%sys.argv[0]
    sys.exit()

try:
    host = sys.argv[1]
    port = sys.argv[2]
except IndexError:
    usage()

try:
    server = wsgiserver.CherryPyWSGIServer((host,int(port)), WSGIHandler())
    server.start()
except KeyboardInterrupt:
    server.stop()
    sys.exit()
